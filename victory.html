<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Harira Quest">
    <link rel="apple-touch-icon" href="mochkil-harira.PNG">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <title>Mission Success | Maximum Reality</title>
    <style>
        :root { --neon-green: #39FF14; --neon-cyan: #00FFFF; --neon-pink: #FF00FF; }
        
        body { 
            margin: 0; background: #000; color: white; 
            font-family: 'Courier New', monospace; overflow: hidden;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh;
            width: 100vw;
        }
        
        #victory-header {
            text-align: center; 
            margin-top: env(safe-area-inset-top, 20px);
            margin-bottom: 10px; 
            z-index: 10;
        }
        
        .glitch-title {
            font-size: 1.8rem;
            color: var(--neon-green);
            text-shadow: 2px 2px var(--neon-pink);
            animation: glitch 1s infinite;
        }

        /* RESCUED VIDEO BOX: Wider to allow YouTube controls to be clickable */
        .video-container {
            position: relative; 
            width: 90%; 
            max-width: 320px; 
            aspect-ratio: 9/16; 
            border: 3px solid var(--neon-cyan);
            box-shadow: 0 0 25px var(--neon-cyan); 
            border-radius: 15px;
            overflow: hidden;
            background: #000;
        }

        iframe, video { width: 100%; height: 100%; border: none; }

        .btn-home {
            margin-top: 20px; 
            padding: 15px 40px;
            background: transparent; 
            border: 2px solid var(--neon-pink);
            color: var(--neon-pink); 
            font-weight: bold; 
            border-radius: 12px;
            text-decoration: none; 
            text-shadow: 0 0 5px var(--neon-pink);
            box-shadow: 0 0 10px var(--neon-pink);
            animation: pulse 2s infinite;
            z-index: 100;
            margin-bottom: env(safe-area-inset-bottom, 20px);
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 5px var(--neon-pink); transform: scale(1); }
            50% { box-shadow: 0 0 20px var(--neon-pink); transform: scale(1.05); }
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        @media screen and (max-height: 700px) {
            .video-container { max-width: 260px; }
            .glitch-title { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div id="victory-header">
        <h1 class="glitch-title">HARIRA UNLOCKED</h1>
        <p style="color: var(--neon-cyan); margin: 0; font-size: 0.9rem;">MOCHKIL & AZUL APPROVE</p>
    </div>

    <div class="video-container" id="video-wrapper">
        <iframe 
            id="missionVideo"
            src="https://www.youtube.com/embed/nxcdDiZgwnE?autoplay=1&mute=1&modestbranding=1&rel=0&playsinline=1" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
        </iframe>
    </div>

    <a href="index.html" class="btn-home">REPLAY MISSION</a>

    <script>
        if (navigator.vibrate) navigator.vibrate([100, 50, 100, 50, 300]);

        const container = document.getElementById('video-wrapper');

        function checkConnection() {
            if (!navigator.onLine) {
                // Offline: Show the local MP4
                container.innerHTML = `
                    <video autoplay playsinline controls muted style="width:100%; height:100%; object-fit:cover;">
                        <source src="mission-victory.mp4" type="video/mp4">
                    </video>
                `;
            }
        }

        // Run check on load
        checkConnection();

        // Listen for network changes
        window.addEventListener('online', () => location.reload());
        window.addEventListener('offline', checkConnection);
    </script>
</body>
</html>
